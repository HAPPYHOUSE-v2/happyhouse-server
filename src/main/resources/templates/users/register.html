<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1">
    <title>회원가입</title>
    <link rel="shortcut icon" href="#">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<!-- 헤더 포함 -->
<header th:replace="~{layout/header :: header}"></header>
<main>
    <section class="container">
        <section class="row justify-content-center mt-5">
            <section class="col-md-6">
                <section class="card shadow">
                    <section class="card-body">
                        <h2 class="card-title text-center mb-4">회원가입</h2>
                        <section class="text-center mb-4">
                            <span class="d-block text-dark fw-bold mb-1">해피하우스에 오신 것을 환영합니다.</span>
                            <span class="d-block text-muted">해피하우스는 주택 거래 커뮤니티입니다.</span>
                        </section>
                        <form th:action="@{/member/register}" method="post">
                            <!--이메일 입력-->
                            <section class="mb-3">
                                <label for="email" class="form-label">이메일:</label>
                                <div class="input-group">
                                    <input type="email" class="form-control" id="email" name="email" required>
                                    <button type="button" class="btn btn-outline-secondary" onclick="sendVerificationEmail()">인증 메일 발송</button>
                                </div>
                            </section>
                            <!--이메일 인증코드-->
                            <section id="verificationCodeSection" style="display:none;" class="mb-3">
                                <label for="verificationCode" class="form-label">인증 코드:</label>
                                <div class="input-group">
                                    <input type="text" class="form-control" id="verificationCode" name="verificationCode">
                                    <button type="button" class="btn btn-outline-secondary" onclick="verifyEmail()">인증 확인</button>
                                </div>
                                <span id="emailResult" class="form-text"></span>
                            </section>
                            <!--비밀번호 입력-->
                            <section class="mb-3">
                                <label for="password" class="form-label">비밀번호:</label>
                                <input type="password" class="form-control" id="password" name="password" required>
                                <small class="form-text text-muted">비밀번호는 8자 이상(3종류 조합) 또는 10자 이상(2종류 조합)이어야 합니다.</small>
                                <div id="passwordStrength" class="form-text"></div>
                            </section>
                            <!--닉네임 입력-->
                            <section class="mb-3">
                                <label for="nickname" class="form-label">닉네임:</label>
                                <div class="input-group">
                                    <input type="text" class="form-control" id="nickname" name="nickname" required>
                                    <button type="button" class="btn btn-outline-secondary" onclick="checkNickname()">닉네임 중복 확인</button>
                                </div>
                                <span id="nicknameResult" class="form-text"></span>
                            </section>
                            <section class="d-grid gap-2">
                                <button type="submit" class="btn btn-primary">회원가입</button>
                            </section>
                        </form>
                        <!-- 로그인 이동-->
                        <section class="mt-3 text-center">
                            <p>이미 계정이 있으신가요? <a th:href="@{/member/login}" class="text-decoration-none">로그인</a></p>
                        </section>
                    </section>
                </section>
                <!-- 회원가입 실패 시-->
                <div th:if="${errorMsg}" class="alert alert-danger mt-3" role="alert" th:text="${errorMsg}"></div>
            </section>
        </section>
    </section>
</main>
<script th:src="@{/js/register.js}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>