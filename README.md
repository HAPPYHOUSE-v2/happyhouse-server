# HAAPYHOUSE
ê³µê³µ ë°ì´í„°ë¥¼ í™œìš©í•œ ì£¼íƒ ì‹¤ê±°ë˜ì •ë³´ ì»¤ë®¤ë‹ˆí‹°

http://43.201.50.190:8089

- ì„œë¹„ìŠ¤ ê¸°ê°„ : ~2024.8.7
- ê´€ë¦¬ì ê³„ì • : admin@gmail.com (ë¹„ë°€ë²ˆí˜¸ qwe123!@#)

## ëª©ì°¨
1. [í”„ë¡œì íŠ¸ ê°œìš”](#-í”„ë¡œì íŠ¸-ê°œìš”)
2. [í”„ë¡œì íŠ¸ ê¸°ê°„ & íŒ€ì›](#-í”„ë¡œì íŠ¸-ê¸°ê°„--íŒ€ì›)
3. [ê¸°ìˆ  ìŠ¤íƒ](#ï¸-ê¸°ìˆ -ìŠ¤íƒ)
4. [Architecture](#ï¸-architecture)
5. [ERD](#ï¸-erd)
6. [ì£¼ìš” ê¸°ëŠ¥](#-ê¸°ëŠ¥)
7. [ì´ìŠˆ íŠ¸ë˜í‚¹](#ï¸-ì´ìŠˆ-íŠ¸ë˜í‚¹)

## ğŸ’¡ í”„ë¡œì íŠ¸ ê°œìš”

- ì´ìŠ¤íŠ¸ì†Œí”„íŠ¸ ì˜¤ë¥´ë¯¸ ë°±ì—”ë“œ ê°œë°œì ì–‘ì„±ê³¼ì • 5ê¸°
- ì£¼íƒê±°ë˜ ì»¤ë®¤ë‹ˆí‹° ì„œë¹„ìŠ¤

## ğŸ“† í”„ë¡œì íŠ¸ ê¸°ê°„ & íŒ€ì›

- 2024ë…„ 7ì›” 22ì¼ ~ 2024ë…„ 8ì›” 7ì¼ (13ì¼, 5 â†’ 2ëª…)
- ì´ìƒìœ¤ : ì»¤ë®¤ë‹ˆí‹° ê²Œì‹œíŒ  BE & FE, í…ŒìŠ¤íŠ¸ ë° ë°°í¬
- ì¡°ì„±ìœ¤ : íšŒì›ê°€ì…, ë¡œê·¸ì¸, ë§ˆì´í˜ì´ì§€, ê´€ë¦¬ì BE&FE, í…ŒìŠ¤íŠ¸ ë° ë°°í¬

## âš™ï¸ ê¸°ìˆ  ìŠ¤íƒ

**BE**

<img src="https://img.shields.io/badge/JAVA-007396?style=for-the-badge&logo=java&logoColor=white"> <img src="https://img.shields.io/badge/Spring-6DB33F?style=for-the-badge&logo=Spring&logoColor=white">
<img src="https://img.shields.io/badge/SpringBoot-6DB33F?style=for-the-badge&logo=SpringBoot&logoColor=white">
<img src="https://img.shields.io/badge/Spring_Security-6DB33F?style=for-the-badge&logo=Spring-Security&logoColor=white">
<img src="https://img.shields.io/badge/JWT-000000?style=for-the-badge&logo=JSON%20web%20tokens&logoColor=white">
<img src="https://img.shields.io/badge/mysql-4479A1?style=for-the-badge&logo=mysql&logoColor=white">
<img src="https://img.shields.io/badge/redis-%23DD0031.svg?&style=for-the-badge&logo=redis&logoColor=white">
</br>

**FE**

<img src="https://img.shields.io/badge/html-E34F26?style=for-the-badge&logo=html5&logoColor=white"><img src="https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black">
<img src="https://img.shields.io/badge/Thymeleaf-%23005C0F.svg?style=for-the-badge&logo=Thymeleaf&logoColor=white">
<img src="https://img.shields.io/badge/bootstrap-%23563D7C.svg?style=for-the-badge&logo=bootstrap&logoColor=white">
</br>

**TOOLS**

<img src="https://img.shields.io/badge/AWS_S3-569A31?style=for-the-badge&logo=amazon-aws&logoColor=white"><img src="https://img.shields.io/badge/AWS_Lightsail-232F3E?style=for-the-badge&logo=amazon-aws&logoColor=white">


## âš™ï¸ Architecture
![image](https://github.com/user-attachments/assets/aad13bd5-114b-4ce9-ad29-1074adbbfea4)


## âš™ï¸ ERD

![image](https://github.com/user-attachments/assets/0925c5d8-dc4c-45a5-b2b2-cfc8586bb490)


## ğŸ–¥ ê¸°ëŠ¥

### íšŒì›ê´€ë¦¬
- **íšŒì›ê°€ì… & ì´ë©”ì¼ ì¸ì¦**
   - JavaMailSender, Redisë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë©”ì¼ ì¸ì¦í•´ì•¼ íšŒì›ê°€ì… ê°€ëŠ¥
   - ë‹‰ë„¤ì„ ì¤‘ë³µ í™•ì¸ (Client fetchAPIë¡œ ë¹„ë™ê¸° í†µì‹ )
     
     <img src="https://github.com/user-attachments/assets/9f809607-a109-493a-8d93-023259bb29b6" width="500" height="400" alt="íšŒì›ê°€ì… ì´ë¯¸ì§€">
     <img src="https://github.com/user-attachments/assets/6351bd2f-8a73-412e-80b8-56fe13c6c7e4" width="400" height="300" alt="ì´ë©”ì¼ ì¸ì¦ ì´ë¯¸ì§€">

- **ë¡œê·¸ì¸ & ë¹„ë°€ë²ˆí˜¸ ì´ˆê¸°í™”**
  - JWT Access & Refresh Tokenìœ¼ë¡œ ì¸ì¦ ë° ì¸ê°€ ì²˜ë¦¬(Refresh Tokenì€ Redisì— ì €ì¥)
  - Access Token ìœ íš¨ê¸°ê°„(15ë¶„)ì´ ì§€ë‚˜ë©´ Refresh Tokenì„ í†µí•´ Access Token ìƒˆë¡œ ë°œê¸‰
  - ë¹„ë°€ë²ˆí˜¸ ì´ˆê¸°í™” ë²„íŠ¼ í´ë¦­ ì‹œ ì…ë ¥í•œ ì´ë©”ì¼ ì£¼ì†Œë¡œ ì´ˆê¸°í™”ëœ ì´ë©”ì¼ ì „ì†¡(ë§ˆì´í˜ì´ì§€ì—ì„œ ìˆ˜ì • ê°€ëŠ¥)
    
    <img src="https://github.com/user-attachments/assets/7920768b-3d45-4648-9d43-785eb78c7893" width="300" height="300" alt="ë¡œê·¸ì¸ ì´ë¯¸ì§€">
    <img src="https://github.com/user-attachments/assets/4613a16c-4b1b-499a-b2c7-ffb2c0518705" width="400" height="300" alt="ë¹„ë°€ë²ˆí˜¸ ì´ˆê¸°í™” ì´ë¯¸ì§€">

- **ë§ˆì´í˜ì´ì§€ (ê°œì¸ì •ë³´ ìˆ˜ì • & íšŒì› íƒˆí‡´)**
  - ë‹‰ë„¤ì„, ë¹„ë°€ë²ˆí˜¸ ìˆ˜ì •
    - ë‹‰ë„¤ì„ ì¤‘ë³µ í™•ì¸
    -  ë¹„ë°€ë²ˆí˜¸, ìƒˆ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ ì‹œ ê²€ì¦
  - íšŒì› íƒˆí‡´
    - ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ í›„ íƒˆí‡´ ì²˜ë¦¬(status ê°’ ë³€ê²½, í•´ë‹¹ ì´ë©”ì¼ë¡œ ë‹¤ì‹œ íšŒì›ê°€ì… ë¶ˆê°€)
  
  <img src="https://github.com/user-attachments/assets/2f55a230-6cc9-4f50-906d-fe5eb67e00c5" width="500" height="300" alt="ê°œì¸ì •ë³´ ìˆ˜ì • ì´ë¯¸ì§€">
  <img src="https://github.com/user-attachments/assets/71438889-89c1-4349-9e15-52830f9d6920" width="500" height="300" alt="íƒˆí‡´ í™”ë©´ ì´ë¯¸ì§€">

- **ê´€ë¦¬ì ê¶Œí•œ ì¸ê°€ ì²˜ë¦¬**
  - ADMIN ê¶Œí•œì„ ê°€ì§„ Userë§Œ ê´€ë¦¬ì í˜ì´ì§€ ì ‘ì† ê°€ëŠ¥

  <img src="https://github.com/user-attachments/assets/a51d62da-eba4-407a-90a8-489d009b90d3" width="500" height="300" alt="ê°œì¸ì •ë³´ ìˆ˜ì • ì´ë¯¸ì§€">
  <img src="https://github.com/user-attachments/assets/4118e47c-d7c3-475a-98b7-058405d4cdfc" width="500" height="300" alt="íƒˆí‡´ í™”ë©´ ì´ë¯¸ì§€">

- **ì»¤ë®¤ë‹ˆí‹° ê²Œì‹œíŒ**
   - **ê²Œì‹œê¸€ ëª©ë¡**
     - ê³µì§€ ê²Œì‹œê¸€ì„ ë¨¼ì € ë³¼ìˆ˜ ìˆê²Œ ê³µì§€ì—¬ë¶€ë¡œ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì¡°íšŒ
     - ìµœì‹ ê²Œì‹œê¸€ë¶€í„° ì¡°íšŒí•  ìˆ˜ ìˆê²Œ ì‘ì„±ì¼ì ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì¡°íšŒ
     <img src="https://github.com/user-attachments/assets/1f814a7d-c9ab-476b-8d43-b23d276a3e0d" width="700" alt="ê²Œì‹œê¸€ ëª©ë¡ ì´ë¯¸ì§€">

     
- **ê²€ìƒ‰ & í˜ì´ì§•**
  - ê²€ìƒ‰
     - ì…ë ¥ë°›ì€ ë‹¨ì–´ë¥¼ í¬í•¨í•˜ê³  ìˆëŠ” ì œëª© ì¡°íšŒ
  - í˜ì´ì§•
     - 10ê°œì˜ ê²Œì‹œê¸€ ë§ˆë‹¤ 1í˜ì´ì§€
     - `>` í´ë¦­ ì‹œ 5ê°œ í˜ì´ì§€ ì´ë™, `>>` í´ë¦­ì‹œ ë§ˆì§€ë§‰ í˜ì´ì§€ë¡œ ì´ë™
     <img src="https://github.com/user-attachments/assets/595a6f0e-fe83-4850-8b0b-8ffa32a94df7" width="700" alt="ê²Œì‹œê¸€ ê²€ìƒ‰ ì´ë¯¸ì§€">
     <img src="https://github.com/user-attachments/assets/557f8fce-dc44-4598-9338-25a317e4ce6d" width="700" alt="ê²Œì‹œê¸€ í˜ì´ì§• ì´ë¯¸ì§€">
 
- **ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ**
   - ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒë¥¼ í•  ë•Œ í† í° í™•ì¸ì„ í•´ì„œ ê° ì‚¬ìš©ìë³„ë¡œ ì í•©í•œ ê¸°ëŠ¥ ì¡°íšŒ
   - ì…ë ¥ìš”ì†Œ - ì œëª©, ë‚´ìš©, ì²¨ë¶€íŒŒì¼
   - ì¡°íšŒìš”ì†Œ - ë‹‰ë„¤ì„, ì‘ì„±ì¼ì, ì¡°íšŒìˆ˜, ëŒ“ê¸€
     <img src="https://github.com/user-attachments/assets/0732ffe2-9aa4-42c1-93d9-a46dd86a3719" width="500" alt="ê²Œì‹œê¸€ ìƒì„¸ ì´ë¯¸ì§€">


- **ë“±ë¡ & ìˆ˜ì • & ì‚­ì œ**
  - ì‘ì„±ìë§Œ ìˆ˜ì • ë° ì‚­ì œ ë²„íŠ¼ ì¡°íšŒ ê°€ëŠ¥
     <img src="https://github.com/user-attachments/assets/4a93c38a-171f-4f73-b2df-bbd026fa80e6" width="500" alt="ê²Œì‹œê¸€ ë“±ë¡ ì´ë¯¸ì§€">
     <img src="https://github.com/user-attachments/assets/c2a06c97-4332-427e-9f93-806b6aa40103" width="500" alt="ê²Œì‹œê¸€ ì‚­ì œ ì´ë¯¸ì§€">

 
- **ì²¨ë¶€íŒŒì¼ ë“±ë¡**
  - AWS S3 ë²„í‚·ì„ ì´ìš©í•œ ì²¨ë¶€íŒŒì¼ ê¸°ëŠ¥
  - ì…ë ¥ë°›ì€ MultipartFileì„ S3 ë²„í‚·ì— ë“±ë¡ í›„(amazonS3.putObject) url ë°›ì•„ì˜¤ê¸°(amazonS3.getUrl)
     <img src="https://github.com/user-attachments/assets/f292bec4-21d1-4195-a511-d9b7f6bb951d" width="500" alt="ê²Œì‹œê¸€ ì²¨ë¶€ ì´ë¯¸ì§€">

 
- **ëŒ“ê¸€ ë“±ë¡ & ì‚­ì œ**
  - ìƒì„¸ ê²Œì‹œê¸€ í˜ì´ì§€ì—ì„œ ëŒ“ê¸€ ë“±ë¡ / ì‚­ì œ ê¸°ëŠ¥
     <img src="https://github.com/user-attachments/assets/feaf07bc-d187-4894-b6b3-dabfd5a6af3b" width="500" alt="ê²Œì‹œê¸€ ì²¨ë¶€ ì´ë¯¸ì§€">


## âš ï¸ ì´ìŠˆ íŠ¸ë˜í‚¹

### ë¡œê·¸ì•„ì›ƒ ì‹œ 401 ì˜¤ë¥˜

- ë¬¸ì œ ìƒí™©

  <img src="https://github.com/user-attachments/assets/b112a5b6-8358-403b-960f-dd3969c65bbb" width="400" height="300" alt="ë¡œê·¸ì•„ì›ƒ ì´ë¯¸ì§€ ">

- ì›ì¸
   - ë¡œê·¸ì•„ì›ƒ("/member/logout")ì´ ì¸ì¦í•œ ìƒíƒœ(authenticated())ì—ë§Œ ì²˜ë¦¬í•  ìˆ˜ ìˆì—ˆê¸° ë•Œë¬¸ 
  ```java
   @Bean
    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
        http
                .cors(cors -> cors.configurationSource(corsConfigurationSource()))
                .csrf(csrf -> csrf.disable()) //CSRF ë³´í˜¸ ë¹„í™œì„±í™”(JWT ì‚¬ìš©)
                .sessionManagement(session -> session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))
                .authorizeHttpRequests(auth -> auth
                        .requestMatchers("/", "/member/register", "/member/login",
                                "/member/refresh", "/member/duplicateNickname",
                                "/member/send-verification-email", "/member/verify-email", "/member/temppassword").permitAll()
                        .requestMatchers(HttpMethod.GET, "/post", "/static/**", "/image/**").permitAll()
                        .requestMatchers(HttpMethod.POST, "/post").authenticated()
                        .requestMatchers("/static/**", "/webjars/**", "/css/**", "/js/**", "/image/**").permitAll()
                        .requestMatchers( "/member/logout", "/member/check-auth", "/mypage", "/mypage/**", "/member/withdrawal", "/comment/**", "/delete/**").authenticated() //ë¡œê·¸ì¸ í•´ì•¼ ê°€ëŠ¥
                        .requestMatchers("/admin/**").hasRole("ADMIN") //ê´€ë¦¬ì ê¶Œí•œë§Œ
                        .anyRequest().authenticated()
                )
                .addFilterBefore(new JwtFilter(userService, jwtUtil), UsernamePasswordAuthenticationFilter.class) //JWTí•„í„° ì¶”ê°€
                .exceptionHandling(exceptions -> exceptions
                        //í•´ë‹¹ ì˜¤ë¥˜ ì½”ë“œì™€ ë©”ì‹œì§€ë¥¼ HTTP ì‘ë‹µìœ¼ë¡œ ì§ì ‘ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì „ì†¡
                        .authenticationEntryPoint((request, response, authException) -> { //ì¸ì¦ ì‹¤íŒ¨ ì‹œ 401
                            response.sendError(HttpServletResponse.SC_UNAUTHORIZED, "Unauthorized");
                            //ì¶”ê°€
                            response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);
                            response.setContentType("application/json");
                            response.getWriter().write("{\"error\": \"Unauthorized\"}");
                        })
                        .accessDeniedHandler((request, response, accessDeniedException) -> { //ì ‘ê·¼ ê±°ë¶€ ì‹œ 403
                            response.sendRedirect("/error/403");
                        })
                )
                .formLogin(form -> form.disable())
                .httpBasic(basic -> basic.disable());

        return http.build();
    }
  ```
  
- í•´ê²°
   - ì¸ì¦ì´ ì‹¤íŒ¨í•œ ìƒí™©ì´ê±°ë‚˜ ì¸ì¦ ìƒíƒœì™€ ê´€ê³„ì—†ì´ ì‚¬ìš©ìê°€ ì–¸ì œë“  ë¡œê·¸ì•„ì›ƒí•  ìˆ˜ ìˆì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— permitAll()ì´ ì ì ˆí•¨
   - ì„œë²„ì—ì„œ ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬ ì‹œ ìš”ì²­í•œ ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ í™•ì¸í•˜ê³ , í•´ë‹¹ ì‚¬ìš©ìì˜ Access token, Refresh Tokenì„ ë¬´íš¨ ì²˜ë¦¬í•¨
   ```java
   @Bean
    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
        http
                .cors(cors -> cors.configurationSource(corsConfigurationSource()))
                .csrf(csrf -> csrf.disable()) //CSRF ë³´í˜¸ ë¹„í™œì„±í™”(JWT ì‚¬ìš©)
                .sessionManagement(session -> session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))
                .authorizeHttpRequests(auth -> auth
                        .requestMatchers("/", "/member/register", "/member/login",
                                "/member/refresh", "/member/duplicateNickname",
                                "/member/send-verification-email", "/member/verify-email", "/member/temppassword", "/member/logout").permitAll()
                        .requestMatchers(HttpMethod.GET, "/post", "/static/**", "/image/**").permitAll()
                        .requestMatchers(HttpMethod.POST, "/post").authenticated()
                        .requestMatchers("/static/**", "/webjars/**", "/css/**", "/js/**", "/image/**").permitAll()
                        .requestMatchers( "/member/check-auth", "/mypage", "/mypage/**", "/member/withdrawal", "/comment/**", "/delete/**").authenticated() //ë¡œê·¸ì¸ í•´ì•¼ ê°€ëŠ¥
                        .requestMatchers("/admin/**").hasRole("ADMIN") //ê´€ë¦¬ì ê¶Œí•œë§Œ
                        .anyRequest().authenticated()
                )
                // . . .
        return http.build();
    }
  ```
---

### ê¸°ë³¸ í˜ì´ì§• ì •ë ¬ì€ í•˜ë‚˜ì˜ ê°’ë§Œ ê°€ëŠ¥
  
  - ê¸°ì¡´ í˜ì´ì§•ì€ í•˜ë‚˜ì˜ ì •ë ¬ë§Œ ì‚¬ìš© ê°€ëŠ¥.
  - noticeYnì— ëŒ€í•œ ë‚´ë¦¼ì°¨ìˆœê³¼, createAtì— ëŒ€í•œ ë‚´ë¦¼ì°¨ìˆœì„ ë™ì‹œì— ì‚¬ìš©í•˜ê³  ì‹¶ìŒ.

  - ê¸°ì¡´ì½”ë“œ
    
     ```java
        @GetMapping
         public String showAllPost(@PageableDefault(sort = "id", direction = Sort.Direction.DESC) Pageable pageable) {
          
      		    Page<Post> posts = postService.showAllPost(pageable);
              
         }
      ```

  - í•´ê²°
     -  @SortDefault.SortDefaults()ë¥¼ ì´ìš©í•´ì„œ 2ê°€ì§€ ì •ë ¬ì„ ë™ì‹œì— ì ìš©
   
      ```java
       @GetMapping
         public String showAllPost(
                 @PageableDefault(page = 0, size = 10)
                 @SortDefault.SortDefaults({
                         @SortDefault(sort = "noticeYn", direction = Sort.Direction.DESC),
                         @SortDefault(sort = "createdAt", direction = Sort.Direction.DESC)
                 })
                 Pageable pageable) {
             Page<Post> posts = postService.showAllPost(pageable);
         }
      ```
